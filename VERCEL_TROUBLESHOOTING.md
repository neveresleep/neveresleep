# Устранение ошибки FUNCTION_INVOCATION_FAILED на Vercel

Если вы получаете ошибку `500: INTERNAL_SERVER_ERROR` или `FUNCTION_INVOCATION_FAILED` при деплое на Vercel, следуйте этим инструкциям для исправления:

## Причины ошибки

Наиболее распространенные причины этой ошибки:

1. Несовместимость Flask с Vercel Serverless Functions
2. Некорректная структура проекта
3. Проблемы с зависимостями

## Решение

Мы изменили структуру проекта для прямой работы с Vercel без использования Flask-приложения напрямую:

1. Обновлен файл `api/index.py`:
   - Убрано использование экземпляра Flask
   - Реализована прямая обработка запросов через функцию `handler(request)`
   - Добавлено чтение шаблонов и статических файлов напрямую из файловой системы

2. Упрощен файл `vercel.json`:
   - Настроена единая точка входа через `/api/index.py`
   - Увеличены лимиты памяти и времени выполнения

3. Добавлен отдельный файл `requirements.txt` в папку `/api`

## Как проверить изменения

1. Обновите проект в GitHub:
   ```
   git add .
   git commit -m "Fix Vercel deployment"
   git push
   ```

2. Vercel автоматически запустит новый деплой
   
3. Проверьте логи выполнения в панели управления Vercel

## Дополнительная отладка

Если ошибка сохраняется, проверьте:

1. **Логи Vercel**: В панели управления перейдите в раздел "Deployments" → выберите деплой → "Functions" → выберите функцию → "Logs"

2. **Локальное тестирование**:
   - Установите Vercel CLI: `npm install -g vercel`
   - Запустите локально: `vercel dev`

3. **Включите режим отладки**:
   - В верхней части `api/index.py` добавьте `print("Debug: Starting handler")` для отслеживания вызова функции
   - Используйте `try-except` блоки с выводом ошибок через `print()` 